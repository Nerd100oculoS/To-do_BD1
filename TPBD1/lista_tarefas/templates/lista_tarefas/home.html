{% extends "lista_tarefas/layout.html" %}
{% load static %}

{% block title %}
    {{title}}
{% endblock %}

{% block style %}
    <link rel="stylesheet" href="{% static 'styles/home.css' %}">
    <script type="text/javascript" src="{% static 'scripts/controle_lista.js' %}"></script>
    <script type="text/javascript" src="{% static 'scripts/att_convite.js' %}"></script>
{% endblock %}

{% block body %}
    {% if user.is_authenticated %}
        <h2>Listas</h2>
        <div id="listas">
            {% for lista in listas %}
                <a href="{% url 'lista' id=lista.id_lista %}">{{ lista.nome_descritivo }}</a><br>
            {% empty %}
                Você não está em nenhuma lista
            {% endfor %}
        </div>
        <h2>Criar Lista</h2>
        <input class="form-control" autofocus type="text" name="nome" placeholder="Nome da Lista" id="nome_lista">
        <input class="btn btn-primary" type="button" value="Registrar" onclick='criar_Lista()'>
        <h2>Convites</h2>
        <button onclick="pullBancoConvite()">Atualizar convite</button>
        <div id="convites">
            {% for convite in convites %}
                Convite da lista {{ convite.fk_lista.nome_descritivo }}<br>
                <a href="{% url 'responder_convite' id_lista=convite.fk_lista.id_lista id_usuario=usuario.nome_usuario resposta=0 %}">Recusar</a><br>
                <a href="{% url 'responder_convite' id_lista=convite.fk_lista.id_lista id_usuario=usuario.nome_usuario resposta=1 %}">Aceitar</a><br>
            {% empty %}
                Você não recebeu nenhum convite
            {% endfor %}
        </div>
    {% else %}
        <div class="container">
            <div class="mini_container"><span class="texto">Usuários:</span><span class="numero">{{usuarios}}</span></div>
            <div class="mini_container"><span class="texto">Listas:</span><span class="numero">{{listas}}</span></div>
            <div class="mini_container"><span class="texto">Tarefas:</span><span class="numero">{{tarefas}}</span></div>
        </div>
    {% endif %}
{% endblock %}